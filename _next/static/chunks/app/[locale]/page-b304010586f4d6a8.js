(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{733:(e,t,r)=>{Promise.resolve().then(r.bind(r,5015))},2978:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,Rb:()=>g,iZ:()=>u});var i=r(2078),n=r(3885),l=r(9708),s=r(2115);let a={apiKey:"AIzaSyCVJ76vO0YNHlGwCtvkKfDe5rWLxFiIzgA",authDomain:"ytpa-f7aca.firebaseapp.com",projectId:"ytpa-f7aca",storageBucket:"ytpa-f7aca.firebasestorage.app",messagingSenderId:"374268704603",appId:"1:374268704603:web:646ec6a00d2b5d45968c7e",measurementId:"G-860EZ6JGNF"};class o{userLoggedIn(){let e=this.firebaseAuth.currentUser;return!!(null==e?void 0:e.emailVerified)}currentUser(){return this.firebaseAuth.currentUser}getUserName(){var e,t;return(null!=(t=null==(e=c.currentUser())?void 0:e.email)?t:"@").split("@")[0]}getAuth(){return this.firebaseAuth}async signOut(){try{await (0,n.CI)(this.firebaseAuth)}catch(e){console.error("Error signing out:",e)}}async signIn(e,t){try{if(!(await (0,n.x9)(this.firebaseAuth,e,t)).user.emailVerified)return{error:"Email not verified!"}}catch(e){return{error:"Sign-in failed, error: ".concat(e)}}return{info:"Sucessfully signed-in."}}async signUp(e,t){try{let r=(await (0,n.eJ)(this.firebaseAuth,e,t)).user;return await (0,n.gA)(r),console.log("Success: Created user ".concat(r.uid,"!")),{info:"Created user account, verify your email and log in."}}catch(e){return{error:"Sign-up failed, error: ".concat(e)}}}async addFavorite(e){let t=this.getUserDoc(),r=await (0,l.x7)(t);if(r.exists()){let i=Array.from(new Set([...r.data().allFavorites||[],e]));await (0,l.mZ)(t,{allFavorites:i})}else console.log("creating new"),await (0,l.BN)(t,{allFavorites:[e]})}async getFavorites(){let e=this.getUserDoc(),t=await (0,l.x7)(e);return t.exists()&&t.data().allFavorites||[]}async removeFromFavorites(e){let t=this.getUserDoc(),r=await (0,l.x7)(t);if(r.exists()){let i=(r.data().allFavorites||[]).filter(t=>t!=e);await (0,l.mZ)(t,{allFavorites:i})}}async storeUserDoc(e){let t=this.currentUser();if(null==t)return"Not logged-in.";try{await (0,l.BN)((0,l.H9)(this.firestoreDb,"users",t.uid),e)}catch(e){return e}}getUserDoc(){let e=this.currentUser();console.assert(null!=e);let t=e.uid;return(0,l.H9)(this.firestoreDb,"users",t)}constructor(){let e=(0,i.Wp)(a);this.firebaseAuth=(0,n.xI)(e),this.firestoreDb=(0,l.aU)(e)}}let c=new o,d=c,h=e=>{var t;return(null!=(t=e.email)?t:"user@").split("@")[0]},u=()=>{let[e,t]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{let e=c.getAuth(),r=(0,n.hg)(e,e=>{e?localStorage.setItem("username",h(e)):localStorage.removeItem("username"),t(e||null)});return()=>r()},[]),e},g=e=>{let t=null;if(e)t=h(e);else if(void 0===e){console.log("Grabbing username from localstorage");let e=localStorage.getItem("username");null!==e&&(t=e)}return t}},5015:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var i=r(5155),n=r(2619),l=r.n(n),s=r(2115),a=r(3832),o=r(4274),c=r(4304),d=r(883),h=r(8886);let u=e=>{let{nMostRecentSongs:t}=e,{t:r}=(0,c.A)(),n=(0,h.N)(),l=d.wA.filter((e,r)=>r>d.wA.length-t-1);l=l.reverse();let s=(0,i.jsx)(h.f,{scores:l,options:n.options});return(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{children:r("recentScores")}),(0,i.jsx)("p",{style:{marginBottom:"1.5rem"},children:r("recentTxt")}),s,n.overlay]})};var g=r(8931);let x={textAlign:"center",display:"inline-block",padding:"0.5rem 1rem",borderRadius:"8px",fontWeight:"bold",margin:"1rem"},f=()=>{a.Ay.initialize("G-42SMWF6LRM"),(0,s.useEffect)(()=>{a.Ay.send({hitType:"pageview",page:window.location.pathname})},[]);let e=d.wA.length,{t,getLink:r}=(0,c.A)(),n=(0,d.G1)(),h={num:(0,i.jsx)(i.Fragment,{children:"".concat(e)}),all:(0,i.jsxs)(l(),{href:r("/listall"),children:[" ",t("allScores")]}),random:(0,i.jsx)(l(),{href:r("/piece?scoreId=".concat(n.videoId)),children:t("randomScore")})},f=(0,i.jsx)(o.x6,{i18nKey:"allScoresTxt",components:h}),m=(0,i.jsx)(o.x6,{i18nKey:"findAllHereTxt",components:h});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{textAlign:"center",margin:"1rem"},children:[(0,i.jsx)("div",{style:x,children:(0,i.jsx)("h1",{style:{margin:0,fontSize:"3rem"},children:g.$})}),(0,i.jsx)("h4",{style:{fontSize:"1.5rem"},children:t("intro")})]}),(0,i.jsx)("h4",{style:{marginTop:"3rem"},children:t("allScores")}),(0,i.jsx)("p",{children:f}),(0,i.jsx)(u,{nMostRecentSongs:20}),(0,i.jsx)("p",{children:m})]})}},8886:(e,t,r)=>{"use strict";r.d(t,{f:()=>v,N:()=>y});var i=r(5155),n=r(2619),l=r.n(n),s=r(7830),a=r(4304),o=r(2978),c=r(653),d=r(2115),h=r(8242),u=r(883);let g="80px",x={font:"inherit",color:"inherit",textDecoration:"none",height:g,display:"block",padding:0,margin:0},f={paddingTop:0,paddingBottom:0,paddingRight:0},m={...f,paddingLeft:".4em"},p=(e,t)=>(0,i.jsx)(l(),{style:x,href:t,children:(0,i.jsx)("div",{style:{height:g,alignContent:"center"},children:e})}),y=()=>{let{t:e}=(0,a.A)(),t=(e=>{let[t,r]=(0,d.useState)(!1),{t:n}=(0,a.A)();return{open:()=>r(!0),component:(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,i.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",textAlign:"center",maxWidth:"300px"},children:[(0,i.jsx)("p",{style:{margin:"0 0 20px"},children:e}),(0,i.jsx)("button",{onClick:()=>{r(!1)},...h.zA,children:n("close")})]})})})}})(e("notLoggedIn"));return{options:[{name:e("favoritesAdd"),onClick:e=>{o.Ay.userLoggedIn()||t.open(),o.Ay.addFavorite(e)}}],overlay:t.component}},v=e=>{let{scores:t,sortInfo:r,options:n}=e,{t:l,getLink:o}=(0,a.A)(),d=n||[],h=d.map(e=>({key:e.name,...e})),x=(0,c.KS)((0,i.jsx)(s.a95,{}),h,(e,t)=>(0,i.jsx)("div",{onClick:t,style:{display:"flex",height:g,alignContent:"center",alignItems:"center",justifyContent:"center"},children:e}),{width:"100%"}),y={textAlign:"left",...m},v=d.length>0,b=v?"38%":"40%",w=u.Ul.map(e=>{let t="";return void 0!==r&&r.by===e&&(t=r.ascending?"▴":"▾"),(0,i.jsxs)("th",{onClick:()=>null==r?void 0:r.sortClick(e),style:{cursor:"pointer",width:b,...y},children:[l(e),t]},e)}),A=v?(0,i.jsx)("th",{style:{width:"4%",...y}}):void 0,k=(0,i.jsx)("thead",{style:{width:"100%"},children:(0,i.jsxs)("tr",{style:{width:"100%"},children:[(0,i.jsx)("th",{style:{width:"10%",...y}}),w,(0,i.jsx)("th",{style:{width:"10%",...y},children:l("songKey")}),A]})});return(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 ".concat("6px")},children:[k,(0,i.jsx)("tbody",{children:t.map(e=>{let t=v?(0,i.jsx)("td",{style:m,children:x(e.videoId)}):void 0,r=o("/piece?scoreId=".concat(e.videoId));return(0,i.jsxs)("tr",{style:{cursor:"pointer",height:g},className:"hoverlink",children:[(0,i.jsx)("td",{style:f,children:p((0,i.jsx)("img",{height:g,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg"),alt:"YouTube thumbnail of ".concat(e.name," by ").concat(e.artist)}),r)}),u.Ul.map(t=>{var n;return(0,i.jsx)("td",{style:m,children:p(null==(n=e[t])?void 0:n.trim(),r)},"td-".concat(t))}),(0,i.jsx)("td",{style:m,children:p(j(e.keys),r)}),t]},e.videoId)})})]})},j=e=>e.map(u.Gn).join(", ")},8931:(e,t,r)=>{"use strict";r.d(t,{default:()=>I,$:()=>j});var i=r(5155),n=r(2619),l=r.n(n),s=r(63),a=r(2115),o=r(7830),c=r(9976),d=r(5239);let h={en:{src:"/_next/static/media/en.5efabd9f.svg",height:800,width:800,blurWidth:0,blurHeight:0},de:{src:"/_next/static/media/de.5bbce141.svg",height:800,width:800,blurWidth:0,blurHeight:0},es:{src:"/_next/static/media/es.b30d06f9.svg",height:800,width:800,blurWidth:0,blurHeight:0},fr:{src:"/_next/static/media/fr.f13e855a.svg",height:800,width:800,blurWidth:0,blurHeight:0}},u=e=>{let t=h[e];if(!t)throw Error("No flag for "+e);return(0,i.jsx)(d.default,{src:t,alt:"Flag for ".concat(e),width:35,style:{margin:"auto"}})};var g=r(4304);let x={navBGCol:"#f2f2f2",navActiveBGCol:"#e3e3e3",navTextCol:"black"};var f=r(2978),m=r(8242);let p={url:"/"},y={size:26,style:{marginRight:"0.5em"}},v=[{url:"/favorites",key:"favorites",icon:(0,i.jsx)(o.OGi,{...y})},{url:"/listall",key:"allScores",icon:(0,i.jsx)(o.YBc,{...y})},{url:"/settings",key:"settingsTitle",icon:(0,i.jsx)(o.hgV,{...y})}].reverse(),j="YouTube Play-Along",b="45px",w="14px",A="16px",k={color:x.navTextCol,padding:"".concat(w," ").concat(A),textDecoration:"none",fontSize:"17px",lineHeight:b,height:b},C={...k,float:"right",pointer:"cursor",...m.eL},S={backgroundColor:x.navBGCol,overflow:"hidden",padding:0};function I(){let e=(0,s.usePathname)(),{t,getLink:r,currentLang:n}=(0,g.A)(),d=(0,f.iZ)(),[h,I]=(0,a.useState)(!1),N=v.filter(t=>t.url===e),F=N.length>0?N[0].key:j,U=(0,i.jsx)(l(),{href:r(p.url),style:{...C,float:"left",margin:0,paddingLeft:0,paddingRight:0},children:(0,i.jsx)("img",{src:"/YTPALogo.svg",height:b,alt:"Youtube Play Along logo"})}),D={color:"black",backgroundColor:"white",padding:"10px",textDecoration:"none",minWidth:"50px",...m.eL},L=c.Yj.filter(e=>n!==e).map(t=>{let r="/"+t+e.slice(3);return(0,i.jsxs)(l(),{className:"hoverlink",href:r,style:D,children:[(0,i.jsx)("div",{style:{marginRight:"1em"},children:t.toUpperCase()})," ",u(t)]},t)}),T={float:"right",...k,overflow:"hidden",pointer:"cursor"},G=(0,i.jsx)("nav",{className:"container",style:S,children:(0,i.jsxs)("div",{style:m.Lv,children:[U,(0,i.jsx)("div",{className:"hide-on-mobile",style:{...k,float:"left"},children:F}),(0,i.jsxs)("div",{className:"hoverlink",style:T,children:[(0,i.jsxs)("div",{onClick:()=>I(!h),style:{...m.eL,cursor:"pointer"},children:[(0,i.jsx)(o.aVW,{...y})," ",u(n)," ","▾"]}),(0,i.jsx)("div",{className:"dropdown",style:{display:"relative",paddingTop:w,marginLeft:"-".concat(A)},children:(0,i.jsx)("div",{style:{display:h?"block":"none",position:"absolute"},children:L})})]}),(()=>{let e={url:"/login",key:"login",icon:(0,i.jsx)(o.w77,{...y})},t=(0,f.Rb)(d);return null!=t&&(e.icon=(0,i.jsx)(o.Pay,{...y}),e.key=t),[e,...v]})().map(n=>{let s=n.url===e?x.navActiveBGCol:S.backgroundColor;return(0,i.jsxs)(l(),{href:r(n.url),className:"hoverlink",style:{...C,backgroundColor:s},children:[n.icon,t(n.key)]},n.url)})]})});return(0,i.jsx)("header",{className:"topnav",style:S,children:G})}}},e=>{e.O(0,[992,811,479,366,619,558,678,832,935,441,255,358],()=>e(e.s=733)),_N_E=e.O()}]);