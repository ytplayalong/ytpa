(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{1988:function(e,t,r){Promise.resolve().then(r.bind(r,4650))},4650:function(e,t,r){"use strict";r.d(t,{default:function(){return h}});var n=r(7437),i=r(7648),s=r(2265),a=r(2953),l=r(3949),o=r(8138),c=r(2641),d=r(4403);let u=e=>{let{nMostRecentSongs:t}=e,{t:r}=(0,o.Z)(),i=(0,d.r)(),s=c.f$.filter((e,r)=>r>c.f$.length-t-1);s=s.reverse();let a=(0,n.jsx)(d.q,{scores:s,options:i.options});return(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:r("recentScores")}),(0,n.jsx)("p",{children:r("recentTxt")}),a,i.overlay]})};var h=()=>{a.ZP.initialize("G-42SMWF6LRM"),(0,s.useEffect)(()=>{a.ZP.send({hitType:"pageview",page:window.location.pathname})},[]);let e=c.f$.length,{t,getLink:r}=(0,o.Z)(),d=(0,c.Bq)(),h={num:(0,n.jsx)(n.Fragment,{children:"".concat(e)}),all:(0,n.jsxs)(i.default,{href:r("/listall"),children:[" ",t("allScores")]}),random:(0,n.jsx)(i.default,{href:r("/piece?scoreId=".concat(d.videoId)),children:t("randomScore")})},g=(0,n.jsx)(l.cC,{i18nKey:"allScoresTxt",components:h});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:t("intro")}),(0,n.jsx)("h4",{children:t("allScores")}),(0,n.jsx)("p",{children:g}),(0,n.jsx)(u,{nMostRecentSongs:20})]})}},4403:function(e,t,r){"use strict";r.d(t,{q:function(){return y},r:function(){return v}});var n=r(7437),i=r(7648),s=r(2744),a=r(8138),l=r(5172),o=r(5259),c=r(2265),d=r(5061),u=e=>{let[t,r]=(0,c.useState)(!1),{t:i}=(0,a.Z)();return{open:()=>r(!0),component:(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",textAlign:"center",maxWidth:"300px"},children:[(0,n.jsx)("p",{style:{margin:"0 0 20px"},children:e}),(0,n.jsx)("button",{onClick:()=>{r(!1)},...d.CL,children:i("close")})]})})})}},h=r(2641);let g="80px",f={font:"inherit",color:"inherit",textDecoration:"none",height:g,display:"block",padding:0,margin:0},p={paddingTop:0,paddingBottom:0,paddingRight:0},x={...p,paddingLeft:".4em"},m=(e,t)=>(0,n.jsx)(i.default,{style:f,href:t,children:(0,n.jsx)("div",{style:{height:g,alignContent:"center"},children:e})}),v=()=>{let{t:e}=(0,a.Z)(),t=u(e("notLoggedIn"));return{options:[{name:e("favoritesAdd"),onClick:e=>{l.ZP.userLoggedIn()||t.open(),l.ZP.addFavorite(e)}}],overlay:t.component}},y=e=>{let{scores:t,sortInfo:r,options:i}=e,{t:l,getLink:c}=(0,a.Z)(),d=i||[],u=d.map(e=>({key:e.name,...e})),f=(0,o.h2)((0,n.jsx)(s.rgS,{}),u,(e,t)=>(0,n.jsx)("div",{onClick:t,style:{display:"flex",height:g,alignContent:"center",alignItems:"center",justifyContent:"center"},children:e}),{width:"100%"}),v={textAlign:"left",...x},y=d.length>0,b=y?"38%":"40%",w=h.MR.map(e=>{let t="";return void 0!==r&&r.by===e&&(t=r.ascending?"▴":"▾"),(0,n.jsxs)("th",{onClick:()=>null==r?void 0:r.sortClick(e),style:{cursor:"pointer",width:b,...v},children:[l(e),t]},e)}),I=y?(0,n.jsx)("th",{style:{width:"4%",...v}}):void 0,S=(0,n.jsx)("thead",{style:{width:"100%"},children:(0,n.jsxs)("tr",{style:{width:"100%"},children:[(0,n.jsx)("th",{style:{width:"10%",...v}}),w,(0,n.jsx)("th",{style:{width:"10%",...v},children:l("songKey")}),I]})});return(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 ".concat("6px")},children:[S,(0,n.jsx)("tbody",{children:t.map(e=>{let t=y?(0,n.jsx)("td",{style:x,children:f(e.videoId)}):void 0,r=c("/piece?scoreId=".concat(e.videoId));return(0,n.jsxs)("tr",{style:{cursor:"pointer",height:g},className:"hoverlink",children:[(0,n.jsx)("td",{style:p,children:m((0,n.jsx)("img",{height:g,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg"),alt:"YouTube thumbnail of ".concat(e.name," by ").concat(e.artist)}),r)}),h.MR.map(t=>{var i;return(0,n.jsx)("td",{style:x,children:m(null===(i=e[t])||void 0===i?void 0:i.trim(),r)},"td-".concat(t))}),(0,n.jsx)("td",{style:x,children:m(j(e.keys),r)}),t]},e.videoId)})})]})},j=e=>e.map(h.z8).join(", ")},5172:function(e,t,r){"use strict";r.d(t,{QY:function(){return h},xJ:function(){return u}});var n=r(738),i=r(4752),s=r(5978),a=r(2265);let l={apiKey:"AIzaSyCVJ76vO0YNHlGwCtvkKfDe5rWLxFiIzgA",authDomain:"ytpa-f7aca.firebaseapp.com",projectId:"ytpa-f7aca",storageBucket:"ytpa-f7aca.firebasestorage.app",messagingSenderId:"374268704603",appId:"1:374268704603:web:646ec6a00d2b5d45968c7e",measurementId:"G-860EZ6JGNF"};class o{userLoggedIn(){let e=this.firebaseAuth.currentUser;return!!(null==e?void 0:e.emailVerified)}currentUser(){return this.firebaseAuth.currentUser}getUserName(){var e,t;return(null!==(t=null===(e=c.currentUser())||void 0===e?void 0:e.email)&&void 0!==t?t:"@").split("@")[0]}getAuth(){return this.firebaseAuth}async signOut(){try{await (0,i.w7)(this.firebaseAuth)}catch(e){console.error("Error signing out:",e)}}async signIn(e,t){try{if(!(await (0,i.e5)(this.firebaseAuth,e,t)).user.emailVerified)return{error:"Email not verified!"}}catch(e){return{error:"Sign-in failed, error: ".concat(e)}}return{info:"Sucessfully signed-in."}}async signUp(e,t){try{let r=(await (0,i.Xb)(this.firebaseAuth,e,t)).user;return await (0,i.w$)(r),console.log("Success: Created user ".concat(r.uid,"!")),{info:"Created user account, verify your email and log in."}}catch(e){return{error:"Sign-up failed, error: ".concat(e)}}}async addFavorite(e){let t=this.getUserDoc(),r=await (0,s.QT)(t);if(r.exists()){let n=Array.from(new Set([...r.data().allFavorites||[],e]));await (0,s.r7)(t,{allFavorites:n})}else console.log("creating new"),await (0,s.pl)(t,{allFavorites:[e]})}async getFavorites(){let e=this.getUserDoc(),t=await (0,s.QT)(e);return t.exists()&&t.data().allFavorites||[]}async removeFromFavorites(e){let t=this.getUserDoc(),r=await (0,s.QT)(t);if(r.exists()){let n=(r.data().allFavorites||[]).filter(t=>t!=e);await (0,s.r7)(t,{allFavorites:n})}}async storeUserDoc(e){let t=this.currentUser();if(null==t)return"Not logged-in.";try{await (0,s.pl)((0,s.JU)(this.firestoreDb,"users",t.uid),e)}catch(e){return e}}getUserDoc(){let e=this.currentUser();console.assert(null!=e);let t=e.uid;return(0,s.JU)(this.firestoreDb,"users",t)}constructor(){let e=(0,n.ZF)(l);this.firebaseAuth=(0,i.v0)(e),this.firestoreDb=(0,s.ad)(e)}}let c=new o;t.ZP=c;let d=e=>{var t;return(null!==(t=e.email)&&void 0!==t?t:"user@").split("@")[0]},u=()=>{let[e,t]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{let e=c.getAuth(),r=(0,i.Aj)(e,e=>{e?localStorage.setItem("username",d(e)):localStorage.removeItem("username"),t(e||null)});return()=>r()},[]),e},h=e=>{let t=null;if(e)t=d(e);else if(void 0===e){console.log("Grabbing username from localstorage");let e=localStorage.getItem("username");null!==e&&(t=e)}return t}}},function(e){e.O(0,[358,400,51,822,648,434,167,209,971,117,744],function(){return e(e.s=1988)}),_N_E=e.O()}]);