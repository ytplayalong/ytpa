(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{749:(e,t,n)=>{"use strict";n.d(t,{Qm:()=>o,T3:()=>a,_G:()=>h,an:()=>l,qb:()=>c,tB:()=>u});var r=n(5155),i=n(2619),s=n.n(i);let l="80px",a={paddingTop:0,paddingBottom:0,paddingRight:0,paddingLeft:0},o={...a,paddingLeft:".4em"},d={font:"inherit",color:"inherit",textDecoration:"none",height:l,display:"block",padding:0,margin:0},c={textAlign:"left",...o},h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.jsx)(s(),{style:d,href:t,...n?{target:"_blank",rel:"noopener noreferrer"}:{},children:(0,r.jsx)("div",{style:{height:l,alignContent:"center"},children:e})})},u=e=>(0,r.jsx)("div",{style:{display:"flex",width:"100%",overflowX:"auto"},children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",overflowX:"auto",borderSpacing:"0 ".concat("6px")},children:[(0,r.jsx)("thead",{style:{width:"100%"},children:(0,r.jsx)("tr",{style:{width:"100%"},children:e.header})}),(0,r.jsx)("tbody",{children:e.body})]})})},1203:(e,t,n)=>{"use strict";n.d(t,{QueryScore:()=>F});var r=n(5155),i=n(63),s=n(2115),l=n(2271),a=n(8242),o=n(883);let d=e=>{let{videoId:t,playerRef:n}=e,i={...o.$n,playerVars:{autoplay:1}},d=s.createElement(l.A,{videoId:t,opts:i,ref:n,onReady:()=>console.log("I'm ready, loaded ".concat(t,"!"))});return(0,r.jsx)("div",{style:{...o.$n,margin:"auto"},children:(0,r.jsx)("div",{style:a.yG,children:d})})};var c=n(7830),h=n(4304),u=n(653),m=n(5334),x=n(1850);function p(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}class g{interpolate(e){let t,n,r,i,s,l;for(n=l=this.x.length-2;(l<=0?n<=0:n>=0)&&!(this.x[n]<=e);l<=0?n+=1:n-=1);return t=this.x[n+1]-this.x[n],i=Math.pow(r=(e-this.x[n])/t,2),(2*(s=Math.pow(r,3))-3*i+1)*this.y[n]+(s-2*i+r)*t*this.m[n]+(-2*s+3*i)*this.y[n+1]+(s-i)*t*this.m[n+1]}constructor(e,t){let n,r,i,s,l,a,o,d,c,h,u,m,x,p,g,f,y;for(l=0,o=e.length,i=[],a=[],n=[],r=[],s=[],d=[],p=o-1;0<=p?l<p:l>p;0<=p?l+=1:l-=1)i[l]=(t[l+1]-t[l])/(e[l+1]-e[l]),l>0&&(a[l]=(i[l-1]+i[l])/2);for(l=0,a[0]=i[0],a[o-1]=i[o-2],c=[],g=o-1;0<=g?l<g:l>g;0<=g?l+=1:l-=1)0===i[l]&&c.push(l);for(h=0,m=c.length;h<m;h++)a[l=c[h]]=a[l+1]=0;for(l=0,f=o-1;0<=f?l<f:l>f;0<=f?l+=1:l-=1)n[l]=a[l]/i[l],r[l]=a[l+1]/i[l],s[l]=Math.pow(n[l],2)+Math.pow(r[l],2),d[l]=3/Math.sqrt(s[l]);for(l=0,c=[],y=o-1;0<=y?l<y:l>y;0<=y?l+=1:l-=1)s[l]>9&&c.push(l);for(u=0,x=c.length;u<x;u++)a[l=c[u]]=d[l]*n[l]*i[l],a[l+1]=d[l]*r[l]*i[l];this.x=e.slice(0,o),this.y=t.slice(0,o),this.m=a}}var f=n(1477);let y="osmd";class v extends x.OpenSheetMusicDisplay{setup(){this.rules.FingeringPosition=1,this.rules.FingeringOffsetY=1,this.rules.FingeringPositionFromXML=!1}}let j=async(e,t,n)=>(e.setCustomPageFormat(t,n),e.IsReadyToRender()||console.warn("Should not render"),e.render(),e),w=(e,t,n)=>[...Array(n)].map((r,i)=>e+(t-e)*i/n),b=e=>{let[t,n]=(0,s.useState)(null),[i,l]=(0,s.useState)({x:0,y:0}),[a,o]=(0,s.useState)(null),{height:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,[t,n]=(0,s.useState)(p());return(0,s.useEffect)(()=>{let t,r=()=>{void 0!==t&&clearTimeout(t),t=setTimeout(()=>{n(p())},e)};return window.addEventListener("resize",r),()=>{void 0!==t&&clearTimeout(t),window.removeEventListener("resize",r)}},[]),t}(),c=f.fq.getZoom(),h=Math.max(150,.2*d),u=Math.max(Math.min(1,h/260),.5)*c,m=h*u,x=f.fq.isHorizontalMode()?4e4*m:window.innerWidth,{getTime:b,measureMap:I,xml:C}=e;(0,s.useEffect)(()=>{(async()=>{let e=new v(y,{drawCredits:!1,drawPartNames:!1,measureNumberInterval:4});e.setup(),await e.load(C),e.Zoom=u;let t=f.fq.isHorizontalMode()?h*c:1e5;e.setCustomPageFormat(x,t),n(e)})()},[C,u,c]),(0,s.useEffect)(()=>(null!=t&&(async()=>{let e=f.fq.isHorizontalMode()?h*c:1e5;await j(t,x,e),o({ip:((e,t)=>{let n=e.GraphicSheet.MeasureList,r=n.map(e=>{var t;return null==(t=e[0])?void 0:t.stave.x}),i=Object.entries(t).map(e=>[parseFloat(e[0]),e[1]]);if(i.sort((e,t)=>e[0]-t[0]),i=[[0,0]].concat(i),!f.fq.isHorizontalMode()){let e=n.map(e=>{var t;return null==(t=e[0])?void 0:t.stave.y}),t=e[0];e=e.map(e=>e-t);let i=0,s=[[0,0]],l=[];e.forEach((e,t)=>{if(isNaN(e))return void console.log("Found Nan :(");if(e!=i){let e=s[s.length-1],n=w(e[1],i,t-e[0]);l=l.concat(n),s.push([t,i])}i=e});let a=s[s.length-1],o=e.length-1;if(a[0]!=o){s.push([o,i]);let e=w(a[1],i,o-a[0]);(l=l.concat(e)).push(i)}else l.push(a[1]);r=l}let s=i.length,[l,a]=i[0],o=[],d=[];for(let e=0;e<s-1;++e){let[t,n]=i[e+1];if(void 0!==r[n-1]){for(let e=a;e<n;++e){let i=r[e-1];if(void 0!==i){let r=l+(t-l)*(e-a)/(n-a);o.push(r),d.push(i)}}l=t,a=n}}o.push(l),d.push(r[a-1]),[1,2].forEach(e=>{o.push(l+5*e),d.push(r[a-1])});let c=.3*!!f.fq.isHorizontalMode(),h=new g(o,d);return(e,t)=>Math.max(0,(e<=o[0]?d[0]:e>=o[o.length-1]?d[d.length-1]:h.interpolate(e))*t-c*window.innerWidth)})(t,I)})})(),()=>{o(null)}),[t,I,h,c,u,x]),(0,s.useEffect)(()=>{if(null!==a){let e=a.ip,t=setInterval(async()=>{let t=e(await b(),u);l(f.fq.isHorizontalMode()?{x:t,y:0}:{x:0,y:t})},20);return()=>{clearInterval(t)}}},[b,a,u]);let k=f.fq.isHorizontalMode()?h*c:800;return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)("div",{id:y,style:{height:"".concat(k+i.y,"px"),width:"".concat(x,"px"),marginLeft:"-".concat(i.x,"px"),marginTop:"-".concat(i.y,"px")}})})};var I=n(7289);let C=[1,0,-1],k=async e=>(await fetch(e)).text(),M=(e,t,n,r)=>{for(let i of(0,o.qU)(e,t).childNodes)i.nodeName===n&&i.id!==r&&i.remove()},S=e=>{let t=e.parts[e.currPartIdx].id,n=(e=>{let t=e.cloneNode(!0);return t.xmlStandalone=e.xmlStandalone,t})(e.origXml);M(n,"part-list","score-part",t),M(n,"score-partwise","part",t);let r=f.fq.getFingering();return(0,o.mg)(n,e.pitch,e.octave,r),n},E=e=>{let{scoreInfo:t,player:n}=e,i="/mxl/".concat(t.fileName,".musicxml"),l="https://musescore.com/user/83726533/scores/".concat(t.source),d=(0,I.N)(),{t:x}=(0,h.A)(),[p,g]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{let e=await k(i),t=(0,o.NO)(e),n={xml:t,parts:(e=>{let t=(0,o.qU)(e,"score-partwise"),n=[];for(let e of t.getElementsByTagName("score-part"))n.push({id:e.id,name:e.getElementsByTagName("part-name")[0].textContent});return n})(t),currPartIdx:0,origXml:t,pitch:f.fq.getInstrumentKey(),octave:0};g({...n,xml:S(n)})})()},[i]),null!==p){let e=p.pitch,s=p.currPartIdx,h=p.octave,m=(t,n,r)=>{if(t===s&&n===e&&r===h)return;let i={...p,currPartIdx:t,pitch:n,octave:r},l=S(i);g({...i,xml:l,currPartIdx:t})},f=e=>e>0?"+".concat(e):"".concat(e),y=x("octave"),v=0===h?y:"".concat(y,": ").concat(f(h)),j=C.map(t=>({name:f(t),onClick:()=>m(s,e,t),key:f(t)})),w=(0,r.jsx)(u.D4,{options:j,children:v}),I=o.S4.map((e,t)=>({name:e,onClick:()=>m(s,e,h),key:e})),k=x("instrumentKeyShort"),M=(0,r.jsx)(u.D4,{options:I,children:"".concat(k,": ").concat(e)}),E=d.options[0],N={...E,onClick:()=>E.onClick(t.videoId),key:"addFav"},T=(0,a.v5)("30px"),q=(0,r.jsx)(u.D4,{options:[N],wrapper:(e,t)=>(0,r.jsx)("button",{onClick:t,...T,children:(0,r.jsx)(c.a95,{})}),alignRight:!0,children:"..."}),F=(0,r.jsxs)("div",{style:{...a.eL,flexWrap:"wrap"},children:[q,M,w]}),P=(0,r.jsx)(b,{xml:p.xml,measureMap:t.measureMap,getTime:n.getTime},i),z=(0,r.jsx)("div",{style:{width:o.$n.width,maxWidth:o.$n.maxWidth,margin:"auto"},children:(0,r.jsxs)("div",{style:{...a.yG,...a.Xe},children:[(0,r.jsxs)("h4",{children:[x("viewSheetsOn"),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:l,target:"_blank",children:"MuseScore.com"})]}),F]})}),A=(0,r.jsx)("div",{style:{width:o.$n.width,maxWidth:o.$n.maxWidth,margin:"auto"},children:(0,r.jsxs)("div",{style:{...a.yG,...a.Xe},children:[(0,r.jsx)("h3",{children:t.name}),(0,r.jsx)("h3",{children:"-"}),(0,r.jsx)("h3",{children:t.artist})]})});return(0,r.jsxs)(r.Fragment,{children:[A,n.comp,z,P,d.overlay]})}return(0,r.jsx)(m.Loading,{addComp:!0})};var N=n(9252);let T=e=>{let t=o.wA.filter(t=>t.videoId===e.scoreId);if(0===t.length)return(0,r.jsxs)("h3",{children:["YouTube score with ID ",(0,r.jsx)("b",{children:e.scoreId})," not found :("]});let n=t[0];return(0,r.jsx)(q,{scoreInfo:n})},q=e=>{let{scoreInfo:t}=e,n=(e=>{let t=(0,s.useRef)(null),n=(0,s.useCallback)(async()=>{var e;return await (null==(e=t.current)?void 0:e.getInternalPlayer().getCurrentTime())},[t]);return{comp:(0,r.jsx)(d,{playerRef:t,videoId:e}),getTime:n}})(t.videoId);return(0,r.jsx)(E,{scoreInfo:t,player:n})},F=()=>{let e=(0,i.useSearchParams)().get("scoreId");return void 0===e||"string"!=typeof e?(0,r.jsx)(N.To404,{}):(0,r.jsx)(T,{scoreId:e})}},3841:(e,t,n)=>{Promise.resolve().then(n.bind(n,5334)),Promise.resolve().then(n.bind(n,1203))},5334:(e,t,n)=>{"use strict";n.d(t,{Loading:()=>l});var r=n(5155),i=n(4304),s=n(8242);let l=e=>{let{title:t,addComp:n}=e,{t:l}=(0,i.A)(),a=void 0!=t?(0,r.jsx)("h4",{children:t}):null,o=(0,r.jsxs)(r.Fragment,{children:[a,(0,r.jsx)("p",{children:l("loading")})]});return n?(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{style:s.yG,children:o})}):o}},7289:(e,t,n)=>{"use strict";n.d(t,{f:()=>p,N:()=>x});var r=n(5155),i=n(7830),s=n(4304),l=n(2978),a=n(653),o=n(2115),d=n(8242),c=n(883),h=n(749),u=n(63);let m="page",x=()=>{let{t:e}=(0,s.A)(),t=(e=>{let[t,n]=(0,o.useState)(!1),{t:i}=(0,s.A)();return{open:()=>n(!0),component:(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,r.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",textAlign:"center",maxWidth:"300px"},children:[(0,r.jsx)("p",{style:{margin:"0 0 20px"},children:e}),(0,r.jsx)("button",{onClick:()=>{n(!1)},...d.zA,children:i("close")})]})})})}})(e("notLoggedIn"));return{options:[{name:e("favoritesAdd"),onClick:e=>{l.Ay.userLoggedIn()||t.open(),l.Ay.addFavorite(e)}}],overlay:t.component}},p=e=>{let{scores:t,sortInfo:n,options:l}=e,{t:x,getLink:p}=(0,s.A)(),{currentChunk:f,navComponent:y,setPage:v}=function(e,t){let n=(0,u.useSearchParams)(),s=(0,u.usePathname)(),l=n.get(m),a=l?Math.max(1,Number.parseInt(l,10)):1,c=Math.max(1,Math.ceil(e.length/20)),[h,x]=(0,o.useState)(a);(0,o.useEffect)(()=>{h>c&&x(c)},[c,h]),(0,o.useEffect)(()=>{let e=new URLSearchParams(n);if(h>1?e.set(m,h.toString()):e.delete(m),void 0!==globalThis.history){let t="".concat(s,"?").concat(e.toString());globalThis.history.replaceState(null,"",t)}},[h,s,n]),(0,o.useEffect)(()=>{let e=n.get("page"),t=e?Number.parseInt(e,10):1;t!==h&&x(t)},[n]);let p=(h-1)*20,g=e.slice(p,p+t),f=(0,d.v5)("20px");return{currentChunk:g,navComponent:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.4rem",marginBlock:"1rem"},children:[(0,r.jsx)("button",{disabled:1===h,onClick:()=>x(()=>1),...f,children:(0,r.jsx)(i.V2s,{size:24})}),(0,r.jsx)("button",{disabled:1===h,onClick:()=>x(e=>e-1),...f,children:(0,r.jsx)(i.Wup,{size:24})}),(0,r.jsxs)("span",{style:{marginInline:"2rem"},children:[h," / ",c]}),(0,r.jsx)("button",{disabled:h===c,onClick:()=>x(e=>e+1),...f,children:(0,r.jsx)(i.mny,{size:24})}),(0,r.jsx)("button",{disabled:h===c,onClick:()=>x(e=>c),...f,children:(0,r.jsx)(i.$uC,{size:24})})]}),page:h,totalPages:c,setPage:x}}(t,20),j=l||[],w=j.map(e=>({key:e.name,...e})),b=(0,a.KS)((0,r.jsx)(i.a95,{}),w,(e,t)=>(0,r.jsx)("div",{onClick:t,style:{display:"flex",height:h.an,alignContent:"center",alignItems:"center",justifyContent:"center"},children:e}),{width:"100%"},!0),I=j.length>0,C=I?"38%":"40%",k=c.Ul.map(e=>{let t="";return void 0!==n&&n.by===e&&(t=n.ascending?"▴":"▾"),(0,r.jsxs)("th",{onClick:()=>{n&&(n.sortClick(e),v(1))},style:{cursor:"pointer",width:C,...h.qb},children:[x(e),t]},e)}),M=I?(0,r.jsx)("th",{style:{width:"4%",...h.qb}}):void 0,S=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("th",{style:{width:"10%",...h.qb}}),k,(0,r.jsx)("th",{style:{width:"10%",...h.qb},children:x("songKey")}),M]}),E=(0,r.jsx)(r.Fragment,{children:f.map(e=>{let t=I?(0,r.jsx)("td",{style:h.Qm,children:b(e.videoId)}):void 0,n=p("/piece?scoreId=".concat(e.videoId));return(0,r.jsxs)("tr",{style:{cursor:"pointer",height:h.an},className:"hoverlink",children:[(0,r.jsx)("td",{style:h.T3,children:(0,h._G)((0,r.jsx)("img",{height:h.an,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg"),alt:"YouTube thumbnail of ".concat(e.name," by ").concat(e.artist)}),n)}),c.Ul.map(t=>{var i;return(0,r.jsx)("td",{style:h.Qm,children:(0,h._G)(null==(i=e[t])?void 0:i.trim(),n)},"td-".concat(t))}),(0,r.jsx)("td",{style:h.Qm,children:(0,h._G)(g(e.keys),n)}),t]},e.videoId)})});return(0,r.jsxs)(r.Fragment,{children:[y,(0,r.jsx)(h.tB,{header:S,body:E}),y]})},g=e=>e.map(c.Gn).join(", ")},9252:(e,t,n)=>{"use strict";n.d(t,{To404:()=>a});var r=n(5155),i=n(63),s=n(2115),l=n(4304);let a=()=>{let{getLink:e}=(0,l.A)(),t=(0,i.useRouter)();return(0,s.useEffect)(()=>{t.push(e("/404"))}),(0,r.jsx)(r.Fragment,{})}}},e=>{e.O(0,[992,811,479,849,366,558,619,158,192,935,441,255,358],()=>e(e.s=3841)),_N_E=e.O()}]);