(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{7734:function(e,t,r){Promise.resolve().then(r.bind(r,7826)),Promise.resolve().then(r.bind(r,2635))},7826:function(e,t,r){"use strict";r.d(t,{default:function(){return O}});var n=r(7437),a=r(6463),s=r(1938),i=r(2265),l=r(573);class o{interpolate(e){var t,r,n,a,s,i,l,o,c,u;for(i=u=this.x.length-2;(u<=0?i<=0:i>=0)&&!(this.x[i]<=e);u<=0?i+=1:i-=1);return t=this.x[i+1]-this.x[i],o=Math.pow(l=(e-this.x[i])/t,2),r=2*(c=Math.pow(l,3))-3*o+1,a=c-2*o+l,n=-2*c+3*o,s=c-o,r*this.y[i]+a*t*this.m[i]+n*this.y[i+1]+s*t*this.m[i+1]}constructor(e,t){var r,n,a,s,i,l,o,c,u,h,d,m,p,x,g,f,v;for(i=0,o=e.length,a=[],l=[],r=[],n=[],s=[],c=[],x=o-1;0<=x?i<x:i>x;0<=x?i+=1:i-=1)a[i]=(t[i+1]-t[i])/(e[i+1]-e[i]),i>0&&(l[i]=(a[i-1]+a[i])/2);for(i=0,l[0]=a[0],l[o-1]=a[o-2],u=[],g=o-1;0<=g?i<g:i>g;0<=g?i+=1:i-=1)0===a[i]&&u.push(i);for(h=0,m=u.length;h<m;h++)l[i=u[h]]=l[i+1]=0;for(i=0,f=o-1;0<=f?i<f:i>f;0<=f?i+=1:i-=1)r[i]=l[i]/a[i],n[i]=l[i+1]/a[i],s[i]=Math.pow(r[i],2)+Math.pow(n[i],2),c[i]=3/Math.sqrt(s[i]);for(i=0,u=[],v=o-1;0<=v?i<v:i>v;0<=v?i+=1:i-=1)s[i]>9&&u.push(i);for(d=0,p=u.length;d<p;d++)l[i=u[d]]=c[i]*r[i]*a[i],l[i+1]=c[i]*n[i]*a[i];this.x=e.slice(0,o),this.y=t.slice(0,o),this.m=l}}let c="osmd";class u extends l.OpenSheetMusicDisplay{setup(){this.rules.FingeringPosition=1,this.rules.FingeringOffsetY=1,this.rules.FingeringPositionFromXML=!1}}let h=async e=>{let t=new u(c,{drawCredits:!1,drawPartNames:!1,measureNumberInterval:4});return t.setup(),await t.load(e),t.setCustomPageFormat(4e4,2e3),t.render(),t},d=(e,t)=>{let r=e.GraphicSheet.MeasureList.map(e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.stave.x}),n=Object.entries(t),a=n[n.length-1],s=parseInt(a[0]),i=[1,2,3,4,5].map(e=>["".concat(s+5*e),a[1]]),l=(n=[["0",0]].concat(n).concat(i)).length,c=e=>{let[t,r]=n[e];return[parseFloat(t),r]},[u,h]=c(0),d=[],m=[];for(let e=0;e<l-1;++e){let[t,n]=c(e+1);if(void 0!==r[n-1]){for(let e=h;e<n;++e){let a=r[e-1];if(void 0!==a){let r=u+(t-u)*(e-h)/(n-h);d.push(r),m.push(a)}}u=t,h=n}}d.push(u),m.push(r[h-1]);let p=new o(d,m);return e=>{let t=.3*window.innerWidth;return Math.max(0,p.interpolate(e)-t)}},m=e=>{let[t,r]=(0,i.useState)(0),[a,s]=(0,i.useState)(null),{getTime:l,measureMap:o,xml:u}=e;(0,i.useEffect)(()=>((async()=>{s({ip:d(await h(u),o)})})(),()=>{s(null)}),[u,o]);let m=Math.round(4e4-t-window.innerWidth);return(0,i.useEffect)(()=>{if(null!==a){let e=a.ip,t=setInterval(async()=>{r(e(await l()))},20);return()=>{clearInterval(t)}}},[l,a]),(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsx)("div",{id:c,style:{height:"250px",width:"".concat(4e4,"px"),marginLeft:"-".concat(t,"px"),marginRight:"-".concat(m,"px")}})})};var p=r(2635),x=r(4294),g=r(234),f=r(6242);let v=[1,0,-1],w=async e=>(await fetch(e)).text(),y=(e,t,r,n)=>{let a=(0,s.s1)(e,t);a.childNodes.forEach(e=>{e.nodeName===r&&e.id!==n&&a.removeChild(e)})},j=e=>{let t=e.cloneNode(!0);return t.xmlStandalone=e.xmlStandalone,t},I=e=>{let t=e.parts[e.currPartIdx].id,r=j(e.origXml);y(r,"part-list","score-part",t),y(r,"score-partwise","part",t);let n=p.settingsManager.getFingering();return(0,s.p4)(r,e.pitch,e.octave,n),r},M=e=>{let t=(0,s.s1)(e,"score-partwise"),r=[],n=t.getElementsByTagName("score-part");for(let e=0;e<n.length;++e)r.push({id:n[e].id,name:n[e].getElementsByTagName("part-name")[0].textContent});return r},P=()=>p.settingsManager.getInstrumentKey(),N=e=>{let{measureMap:t,player:r,fileName:a,mscComUrl:l}=e,{t:o}=(0,f.Z)(),[c,u]=(0,i.useState)(null);if((0,i.useEffect)(()=>{(async()=>{let e=await w(a),t=(0,s.ON)(e),r={xml:t,parts:M(t),currPartIdx:0,origXml:t,pitch:P(),octave:0};u({...r,xml:I(r)})})()},[a]),null!==c){let e=c.pitch,i=c.currPartIdx,h=c.octave,d=(t,r,n)=>{if(t===i&&r===e&&n===h)return;let a={...c,currPartIdx:t,pitch:r,octave:n},s=I(a);u({...a,xml:s,currPartIdx:t})},p=e=>e>0?"+".concat(e):"".concat(e),f=0===h?"Octave":"Octave ".concat(p(h)),w=v.map(t=>({name:p(t),onClick:()=>d(i,e,t),key:p(t)})),y=(0,n.jsx)(x.H,{options:w,children:f}),j=e=>d(i,e,h),M=s.xj.map((e,t)=>({name:e,onClick:()=>j(e),key:e})),P=(0,n.jsx)(x.H,{options:M,children:"Pitch: ".concat(e)}),N=(0,n.jsxs)("div",{style:g.Pp,children:[P,y]}),b=(0,n.jsx)(m,{xml:c.xml,measureMap:t,getTime:r.getTime},a),C=(0,n.jsxs)("div",{style:{...g.W9,width:s.g1.width,maxWidth:s.g1.maxWidth,margin:"auto"},children:[(0,n.jsxs)("h4",{children:[o("viewSheetsOn"),(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:l,target:"_blank",children:"MuseScore.com"})]}),N]});return(0,n.jsxs)(n.Fragment,{children:[r.comp,C,b]})}return(0,n.jsx)("div",{className:"container",children:"Loading..."})};var b=r(565);let C=e=>{let t=(0,i.useRef)(),r=(0,i.useCallback)(async()=>await t.current.getInternalPlayer().getCurrentTime(),[t]);return{comp:(0,n.jsx)(k,{playerRef:t,videoId:e}),getTime:r}},k=e=>{let{videoId:t,playerRef:r}=e,a={...s.g1,playerVars:{autoplay:1}},l=i.createElement(b.Z,{videoId:t,opts:a,ref:r,onReady:()=>console.log("I'm ready, loaded ".concat(t,"!"))});return(0,n.jsx)("div",{style:{...s.g1,margin:"auto",marginTop:"0.5em"},children:l})},E=e=>{let{scoreInfo:t}=e,r=C(t.videoId),a="/mxl/".concat(t.fileName,".musicxml"),s="https://musescore.com/user/83726533/scores/".concat(t.source);return(0,n.jsx)(N,{measureMap:t.measureMap,player:r,fileName:a,mscComUrl:s})};var O=()=>{let e=(0,a.usePathname)().split("/")[3],t=s.f$.filter(t=>t.videoId===e);if(0===t.length)return(0,n.jsxs)("h3",{children:["YouTube score with ID ",(0,n.jsx)("b",{children:e})," not found :("]});let r=t[0];return(0,n.jsx)(E,{scoreInfo:r})}}},function(e){e.O(0,[170,389,138,702,666,971,23,744],function(){return e(e.s=7734)}),_N_E=e.O()}]);