(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{7734:function(e,t,r){Promise.resolve().then(r.bind(r,4036)),Promise.resolve().then(r.bind(r,2635))},4036:function(e,t,r){"use strict";r.d(t,{default:function(){return F}});var n=r(7437),s=r(6463),a=r(1938),i=r(2265),l=r(573);class o{interpolate(e){var t,r,n,s,a,i,l,o,c,h;for(i=h=this.x.length-2;(h<=0?i<=0:i>=0)&&!(this.x[i]<=e);h<=0?i+=1:i-=1);return t=this.x[i+1]-this.x[i],o=Math.pow(l=(e-this.x[i])/t,2),r=2*(c=Math.pow(l,3))-3*o+1,s=c-2*o+l,n=-2*c+3*o,a=c-o,r*this.y[i]+s*t*this.m[i]+n*this.y[i+1]+a*t*this.m[i+1]}constructor(e,t){var r,n,s,a,i,l,o,c,h,d,u,m,x,p,g,f,v;for(i=0,o=e.length,s=[],l=[],r=[],n=[],a=[],c=[],p=o-1;0<=p?i<p:i>p;0<=p?i+=1:i-=1)s[i]=(t[i+1]-t[i])/(e[i+1]-e[i]),i>0&&(l[i]=(s[i-1]+s[i])/2);for(i=0,l[0]=s[0],l[o-1]=s[o-2],h=[],g=o-1;0<=g?i<g:i>g;0<=g?i+=1:i-=1)0===s[i]&&h.push(i);for(d=0,m=h.length;d<m;d++)l[i=h[d]]=l[i+1]=0;for(i=0,f=o-1;0<=f?i<f:i>f;0<=f?i+=1:i-=1)r[i]=l[i]/s[i],n[i]=l[i+1]/s[i],a[i]=Math.pow(r[i],2)+Math.pow(n[i],2),c[i]=3/Math.sqrt(a[i]);for(i=0,h=[],v=o-1;0<=v?i<v:i>v;0<=v?i+=1:i-=1)a[i]>9&&h.push(i);for(u=0,x=h.length;u<x;u++)l[i=h[u]]=c[i]*r[i]*s[i],l[i+1]=c[i]*n[i]*s[i];this.x=e.slice(0,o),this.y=t.slice(0,o),this.m=l}}function c(){let{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}var h=r(2635);let d="osmd";class u extends l.OpenSheetMusicDisplay{setup(){this.rules.FingeringPosition=1,this.rules.FingeringOffsetY=1,this.rules.FingeringPositionFromXML=!1}}let m=async(e,t,r,n)=>{let s=new u(d,{drawCredits:!1,drawPartNames:!1,measureNumberInterval:4});return s.setup(),await s.load(e),s.setCustomPageFormat(t,r),s.Zoom=n,s.render(),s},x=(e,t)=>{let r=e.GraphicSheet.MeasureList.map(e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.stave.x}),n=Object.entries(t).map(e=>[parseFloat(e[0]),e[1]]);n.sort();let s=n[n.length-1],a=[1,2].map(e=>[s[0]+5*e,s[1]]),i=(n=[[0,0]].concat(n).concat(a)).length,[l,c]=n[0],h=[],d=[];for(let e=0;e<i-1;++e){let[t,s]=n[e+1];if(void 0!==r[s-1]){for(let e=c;e<s;++e){let n=r[e-1];if(void 0!==n){let r=l+(t-l)*(e-c)/(s-c);h.push(r),d.push(n)}}l=t,c=s}}h.push(l),d.push(r[c-1]);let u=new o(h,d);return(e,t)=>{let r=.3*window.innerWidth;return Math.max(0,u.interpolate(e)*t-r)}},p=e=>{let[t,r]=(0,i.useState)(0),[s,a]=(0,i.useState)(null),{height:l}=function(){let[e,t]=(0,i.useState)(c());return(0,i.useEffect)(()=>{function e(){t(c())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),o=h.settingsManager.getZoom(),u=Math.max(150,.2*l),p=Math.max(Math.min(1,u/260),.5)*o,g=u*p*4e4,{getTime:f,measureMap:v,xml:y}=e;return(0,i.useEffect)(()=>((async()=>{a({ip:x(await m(y,g,u*o,p),v)})})(),()=>{a(null)}),[y,v,u,o,g]),(0,i.useEffect)(()=>{if(null!==s){let e=s.ip,t=setInterval(async()=>{r(e(await f(),p))},20);return()=>{clearInterval(t)}}},[f,s,p]),(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsx)("div",{id:d,style:{height:"".concat(u*o,"px"),width:"".concat(g,"px"),marginLeft:"-".concat(t,"px")}})})};var g=r(4294),f=r(234),v=r(6242);let y=[1,0,-1],w=async e=>(await fetch(e)).text(),j=(e,t,r,n)=>{let s=(0,a.s1)(e,t);s.childNodes.forEach(e=>{e.nodeName===r&&e.id!==n&&s.removeChild(e)})},M=e=>{let t=e.cloneNode(!0);return t.xmlStandalone=e.xmlStandalone,t},I=e=>{let t=e.parts[e.currPartIdx].id,r=M(e.origXml);j(r,"part-list","score-part",t),j(r,"score-partwise","part",t);let n=h.settingsManager.getFingering();return(0,a.p4)(r,e.pitch,e.octave,n),r},P=e=>{let t=(0,a.s1)(e,"score-partwise"),r=[],n=t.getElementsByTagName("score-part");for(let e=0;e<n.length;++e)r.push({id:n[e].id,name:n[e].getElementsByTagName("part-name")[0].textContent});return r},E=()=>h.settingsManager.getInstrumentKey(),N=e=>{let{scoreInfo:t,player:r}=e,s="/mxl/".concat(t.fileName,".musicxml"),l="https://musescore.com/user/83726533/scores/".concat(t.source),{t:o}=(0,v.Z)(),[c,h]=(0,i.useState)(null);if((0,i.useEffect)(()=>{(async()=>{let e=await w(s),t=(0,a.ON)(e),r={xml:t,parts:P(t),currPartIdx:0,origXml:t,pitch:E(),octave:0};h({...r,xml:I(r)})})()},[s]),null!==c){let e=c.pitch,i=c.currPartIdx,d=c.octave,u=(t,r,n)=>{if(t===i&&r===e&&n===d)return;let s={...c,currPartIdx:t,pitch:r,octave:n},a=I(s);h({...s,xml:a,currPartIdx:t})},m=e=>e>0?"+".concat(e):"".concat(e),x=o("octave"),v=0===d?x:"".concat(x,": ").concat(m(d)),w=y.map(t=>({name:m(t),onClick:()=>u(i,e,t),key:m(t)})),j=(0,n.jsx)(g.H,{options:w,children:v}),M=e=>u(i,e,d),P=a.xj.map((e,t)=>({name:e,onClick:()=>M(e),key:e})),E=o("instrumentKeyShort"),N=(0,n.jsx)(g.H,{options:P,children:"".concat(E,": ").concat(e)}),b=(0,n.jsxs)("div",{style:f.Pp,children:[N,j]}),S=(0,n.jsx)(p,{xml:c.xml,measureMap:t.measureMap,getTime:r.getTime},s),k=(0,n.jsx)("div",{style:{width:a.g1.width,maxWidth:a.g1.maxWidth,margin:"auto"},children:(0,n.jsxs)("div",{style:{...f.yR,...f.W9},children:[(0,n.jsxs)("h4",{children:[o("viewSheetsOn"),(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:l,target:"_blank",children:"MuseScore.com"})]}),b]})}),C=(0,n.jsx)("div",{style:{width:a.g1.width,maxWidth:a.g1.maxWidth,margin:"auto"},children:(0,n.jsxs)("div",{style:{...f.yR,...f.W9},children:[(0,n.jsx)("h3",{children:t.name}),(0,n.jsx)("h3",{children:"-"}),(0,n.jsx)("h3",{children:t.artist})]})});return(0,n.jsxs)(n.Fragment,{children:[C,r.comp,k,S]})}return(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{style:f.yR,children:"Loading..."})})};var b=r(565);let S=e=>{let t=(0,i.useRef)(),r=(0,i.useCallback)(async()=>await t.current.getInternalPlayer().getCurrentTime(),[t]);return{comp:(0,n.jsx)(k,{playerRef:t,videoId:e}),getTime:r}},k=e=>{let{videoId:t,playerRef:r}=e,s={...a.g1,playerVars:{autoplay:1}},l=i.createElement(b.Z,{videoId:t,opts:s,ref:r,onReady:()=>console.log("I'm ready, loaded ".concat(t,"!"))});return(0,n.jsx)("div",{style:{...a.g1,margin:"auto"},children:(0,n.jsx)("div",{style:f.yR,children:l})})},C=e=>{let{scoreInfo:t}=e,r=S(t.videoId);return(0,n.jsx)(N,{scoreInfo:t,player:r})};var F=()=>{let e=(0,s.usePathname)().split("/")[3],t=a.f$.filter(t=>t.videoId===e);if(0===t.length)return(0,n.jsxs)("h3",{children:["YouTube score with ID ",(0,n.jsx)("b",{children:e})," not found :("]});let r=t[0];return(0,n.jsx)(C,{scoreInfo:r})}}},function(e){e.O(0,[170,389,138,702,666,971,23,744],function(){return e(e.s=7734)}),_N_E=e.O()}]);