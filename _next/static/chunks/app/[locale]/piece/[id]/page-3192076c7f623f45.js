(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{7734:function(e,t,r){Promise.resolve().then(r.bind(r,4036)),Promise.resolve().then(r.bind(r,2635))},4036:function(e,t,r){"use strict";r.d(t,{default:function(){return O}});var n=r(7437),s=r(6463),i=r(1938),a=r(2265),l=r(573);class c{interpolate(e){var t,r,n,s,i,a,l,c,o,h;for(a=h=this.x.length-2;(h<=0?a<=0:a>=0)&&!(this.x[a]<=e);h<=0?a+=1:a-=1);return t=this.x[a+1]-this.x[a],c=Math.pow(l=(e-this.x[a])/t,2),r=2*(o=Math.pow(l,3))-3*c+1,s=o-2*c+l,n=-2*o+3*c,i=o-c,r*this.y[a]+s*t*this.m[a]+n*this.y[a+1]+i*t*this.m[a+1]}constructor(e,t){var r,n,s,i,a,l,c,o,h,d,u,m,x,p,f,g,v;for(a=0,c=e.length,s=[],l=[],r=[],n=[],i=[],o=[],p=c-1;0<=p?a<p:a>p;0<=p?a+=1:a-=1)s[a]=(t[a+1]-t[a])/(e[a+1]-e[a]),a>0&&(l[a]=(s[a-1]+s[a])/2);for(a=0,l[0]=s[0],l[c-1]=s[c-2],h=[],f=c-1;0<=f?a<f:a>f;0<=f?a+=1:a-=1)0===s[a]&&h.push(a);for(d=0,m=h.length;d<m;d++)l[a=h[d]]=l[a+1]=0;for(a=0,g=c-1;0<=g?a<g:a>g;0<=g?a+=1:a-=1)r[a]=l[a]/s[a],n[a]=l[a+1]/s[a],i[a]=Math.pow(r[a],2)+Math.pow(n[a],2),o[a]=3/Math.sqrt(i[a]);for(a=0,h=[],v=c-1;0<=v?a<v:a>v;0<=v?a+=1:a-=1)i[a]>9&&h.push(a);for(u=0,x=h.length;u<x;u++)l[a=h[u]]=o[a]*r[a]*s[a],l[a+1]=o[a]*n[a]*s[a];this.x=e.slice(0,c),this.y=t.slice(0,c),this.m=l}}function o(){let{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}let h="osmd";class d extends l.OpenSheetMusicDisplay{setup(){this.rules.FingeringPosition=1,this.rules.FingeringOffsetY=1,this.rules.FingeringPositionFromXML=!1}}let u=async(e,t,r,n)=>{let s=new d(h,{drawCredits:!1,drawPartNames:!1,measureNumberInterval:4});return s.setup(),await s.load(e),s.setCustomPageFormat(t,r),s.Zoom=n,s.render(),s},m=(e,t)=>{let r=e.GraphicSheet.MeasureList.map(e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.stave.x}),n=Object.entries(t),s=n[n.length-1],i=parseInt(s[0]),a=[1,2,3,4,5].map(e=>["".concat(i+5*e),s[1]]),l=(n=[["0",0]].concat(n).concat(a)).length,o=e=>{let[t,r]=n[e];return[parseFloat(t),r]},[h,d]=o(0),u=[],m=[];for(let e=0;e<l-1;++e){let[t,n]=o(e+1);if(void 0!==r[n-1]){for(let e=d;e<n;++e){let s=r[e-1];if(void 0!==s){let r=h+(t-h)*(e-d)/(n-d);u.push(r),m.push(s)}}h=t,d=n}}u.push(h),m.push(r[d-1]);let x=new c(u,m);return(e,t)=>{let r=.3*window.innerWidth;return Math.max(0,x.interpolate(e)*t-r)}},x=e=>{let[t,r]=(0,a.useState)(0),[s,i]=(0,a.useState)(null),{height:l}=function(){let[e,t]=(0,a.useState)(o());return(0,a.useEffect)(()=>{function e(){t(o())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),c=Math.max(150,.2*l),d=Math.max(Math.min(1,c/260),.5),x=c*d*4e4,{getTime:p,measureMap:f,xml:g}=e;return(0,a.useEffect)(()=>((async()=>{i({ip:m(await u(g,x,c,d),f)})})(),()=>{i(null)}),[g,f]),(0,a.useEffect)(()=>{if(null!==s){let e=s.ip,t=setInterval(async()=>{r(e(await p(),d))},20);return()=>{clearInterval(t)}}},[p,s]),(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsx)("div",{id:h,style:{height:"".concat(c,"px"),width:"".concat(x,"px"),marginLeft:"-".concat(t,"px")}})})};var p=r(2635),f=r(4294),g=r(234),v=r(6242);let y=[1,0,-1],w=async e=>(await fetch(e)).text(),j=(e,t,r,n)=>{let s=(0,i.s1)(e,t);s.childNodes.forEach(e=>{e.nodeName===r&&e.id!==n&&s.removeChild(e)})},I=e=>{let t=e.cloneNode(!0);return t.xmlStandalone=e.xmlStandalone,t},M=e=>{let t=e.parts[e.currPartIdx].id,r=I(e.origXml);j(r,"part-list","score-part",t),j(r,"score-partwise","part",t);let n=p.settingsManager.getFingering();return(0,i.p4)(r,e.pitch,e.octave,n),r},P=e=>{let t=(0,i.s1)(e,"score-partwise"),r=[],n=t.getElementsByTagName("score-part");for(let e=0;e<n.length;++e)r.push({id:n[e].id,name:n[e].getElementsByTagName("part-name")[0].textContent});return r},E=()=>p.settingsManager.getInstrumentKey(),N=e=>{let{scoreInfo:t,player:r}=e,s="/mxl/".concat(t.fileName,".musicxml"),l="https://musescore.com/user/83726533/scores/".concat(t.source),{t:c}=(0,v.Z)(),[o,h]=(0,a.useState)(null);if((0,a.useEffect)(()=>{(async()=>{let e=await w(s),t=(0,i.ON)(e),r={xml:t,parts:P(t),currPartIdx:0,origXml:t,pitch:E(),octave:0};h({...r,xml:M(r)})})()},[s]),null!==o){let e=o.pitch,a=o.currPartIdx,d=o.octave,u=(t,r,n)=>{if(t===a&&r===e&&n===d)return;let s={...o,currPartIdx:t,pitch:r,octave:n},i=M(s);h({...s,xml:i,currPartIdx:t})},m=e=>e>0?"+".concat(e):"".concat(e),p=0===d?"Octave":"Octave ".concat(m(d)),v=y.map(t=>({name:m(t),onClick:()=>u(a,e,t),key:m(t)})),w=(0,n.jsx)(f.H,{options:v,children:p}),j=e=>u(a,e,d),I=i.xj.map((e,t)=>({name:e,onClick:()=>j(e),key:e})),P=(0,n.jsx)(f.H,{options:I,children:"Pitch: ".concat(e)}),E=(0,n.jsxs)("div",{style:g.Pp,children:[P,w]}),N=(0,n.jsx)(x,{xml:o.xml,measureMap:t.measureMap,getTime:r.getTime},s),b=(0,n.jsx)("div",{style:{width:i.g1.width,maxWidth:i.g1.maxWidth,margin:"auto"},children:(0,n.jsxs)("div",{style:{...g.yR,...g.W9},children:[(0,n.jsxs)("h4",{children:[c("viewSheetsOn"),(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:l,target:"_blank",children:"MuseScore.com"})]}),E]})}),k=(0,n.jsx)("div",{style:{width:i.g1.width,maxWidth:i.g1.maxWidth,margin:"auto"},children:(0,n.jsxs)("div",{style:{...g.yR,...g.W9},children:[(0,n.jsx)("h3",{children:t.name}),(0,n.jsx)("h3",{children:"-"}),(0,n.jsx)("h3",{children:t.artist})]})});return(0,n.jsxs)(n.Fragment,{children:[k,r.comp,b,N]})}return(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{style:g.yR,children:"Loading..."})})};var b=r(565);let k=e=>{let t=(0,a.useRef)(),r=(0,a.useCallback)(async()=>await t.current.getInternalPlayer().getCurrentTime(),[t]);return{comp:(0,n.jsx)(C,{playerRef:t,videoId:e}),getTime:r}},C=e=>{let{videoId:t,playerRef:r}=e,s={...i.g1,playerVars:{autoplay:1}},l=a.createElement(b.Z,{videoId:t,opts:s,ref:r,onReady:()=>console.log("I'm ready, loaded ".concat(t,"!"))});return(0,n.jsx)("div",{style:{...i.g1,margin:"auto"},children:(0,n.jsx)("div",{style:g.yR,children:l})})},S=e=>{let{scoreInfo:t}=e,r=k(t.videoId);return(0,n.jsx)(N,{scoreInfo:t,player:r})};var O=()=>{let e=(0,s.usePathname)().split("/")[3],t=i.f$.filter(t=>t.videoId===e);if(0===t.length)return(0,n.jsxs)("h3",{children:["YouTube score with ID ",(0,n.jsx)("b",{children:e})," not found :("]});let r=t[0];return(0,n.jsx)(S,{scoreInfo:r})}}},function(e){e.O(0,[170,389,138,702,666,971,23,744],function(){return e(e.s=7734)}),_N_E=e.O()}]);