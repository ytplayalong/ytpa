(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{749:(e,t,n)=>{"use strict";n.d(t,{Qm:()=>a,T3:()=>o,_G:()=>h,an:()=>l,qb:()=>c,tB:()=>u});var r=n(5155),i=n(2619),s=n.n(i);let l="80px",o={paddingTop:0,paddingBottom:0,paddingRight:0,paddingLeft:0},a={...o,paddingLeft:".4em"},d={font:"inherit",color:"inherit",textDecoration:"none",height:l,display:"block",padding:0,margin:0},c={textAlign:"left",...a},h=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.jsx)(s(),{style:d,href:t,...n?{target:"_blank",rel:"noopener noreferrer"}:{},children:(0,r.jsx)("div",{style:{height:l,alignContent:"center"},children:e})})},u=e=>(0,r.jsx)("div",{style:{display:"flex",width:"100%",overflowX:"auto"},children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",overflowX:"auto",borderSpacing:"0 ".concat("6px")},children:[(0,r.jsx)("thead",{style:{width:"100%"},children:(0,r.jsx)("tr",{style:{width:"100%"},children:e.header})}),(0,r.jsx)("tbody",{children:e.body})]})})},1203:(e,t,n)=>{"use strict";n.d(t,{QueryScore:()=>T});var r=n(5155),i=n(63),s=n(2115),l=n(2271),o=n(8242),a=n(883);let d=e=>{let{videoId:t,playerRef:n}=e,i={...a.$n,playerVars:{autoplay:1}},d=s.createElement(l.A,{videoId:t,opts:i,ref:n,onReady:()=>console.log("I'm ready, loaded ".concat(t,"!"))});return(0,r.jsx)("div",{style:{...a.$n,margin:"auto"},children:(0,r.jsx)("div",{style:o.yG,children:d})})};var c=n(7830),h=n(4304),u=n(653),m=n(5334),x=n(1850);function p(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}class g{interpolate(e){let t,n,r,i,s,l;for(n=l=this.x.length-2;(l<=0?n<=0:n>=0)&&!(this.x[n]<=e);l<=0?n+=1:n-=1);return t=this.x[n+1]-this.x[n],i=Math.pow(r=(e-this.x[n])/t,2),(2*(s=Math.pow(r,3))-3*i+1)*this.y[n]+(s-2*i+r)*t*this.m[n]+(-2*s+3*i)*this.y[n+1]+(s-i)*t*this.m[n+1]}constructor(e,t){let n,r,i,s,l,o,a,d,c,h,u,m,x,p,g,y,f;for(l=0,a=e.length,i=[],o=[],n=[],r=[],s=[],d=[],p=a-1;0<=p?l<p:l>p;0<=p?l+=1:l-=1)i[l]=(t[l+1]-t[l])/(e[l+1]-e[l]),l>0&&(o[l]=(i[l-1]+i[l])/2);for(l=0,o[0]=i[0],o[a-1]=i[a-2],c=[],g=a-1;0<=g?l<g:l>g;0<=g?l+=1:l-=1)0===i[l]&&c.push(l);for(h=0,m=c.length;h<m;h++)o[l=c[h]]=o[l+1]=0;for(l=0,y=a-1;0<=y?l<y:l>y;0<=y?l+=1:l-=1)n[l]=o[l]/i[l],r[l]=o[l+1]/i[l],s[l]=Math.pow(n[l],2)+Math.pow(r[l],2),d[l]=3/Math.sqrt(s[l]);for(l=0,c=[],f=a-1;0<=f?l<f:l>f;0<=f?l+=1:l-=1)s[l]>9&&c.push(l);for(u=0,x=c.length;u<x;u++)o[l=c[u]]=d[l]*n[l]*i[l],o[l+1]=d[l]*r[l]*i[l];this.x=e.slice(0,a),this.y=t.slice(0,a),this.m=o}}var y=n(1477);let f="osmd";class v extends x.OpenSheetMusicDisplay{setup(){this.rules.FingeringPosition=1,this.rules.FingeringOffsetY=1,this.rules.FingeringPositionFromXML=!1}}let j=async(e,t,n)=>(e.setCustomPageFormat(t,n),e.IsReadyToRender()||console.warn("Should not render"),e.render(),e),w=(e,t,n)=>[...Array(n)].map((r,i)=>e+(t-e)*i/n),b=e=>{let[t,n]=(0,s.useState)(null),[i,l]=(0,s.useState)({x:0,y:0}),[o,a]=(0,s.useState)(null),{height:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,[t,n]=(0,s.useState)(p());return(0,s.useEffect)(()=>{let t,r=()=>{void 0!==t&&clearTimeout(t),t=setTimeout(()=>{n(p())},e)};return window.addEventListener("resize",r),()=>{void 0!==t&&clearTimeout(t),window.removeEventListener("resize",r)}},[]),t}(),c=y.f.getZoom(),h=Math.max(150,.2*d),u=Math.max(Math.min(1,h/260),.5)*c,m=h*u,x=y.f.isHorizontalMode()?4e4*m:window.innerWidth,{getTime:b,measureMap:I,xml:C}=e;(0,s.useEffect)(()=>{(async()=>{let e=new v(f,{drawCredits:!1,drawPartNames:!1,measureNumberInterval:4});e.setup(),await e.load(C),e.Zoom=u;let t=y.f.isHorizontalMode()?h*c:1e5;e.setCustomPageFormat(x,t),n(e)})()},[C,u,c]),(0,s.useEffect)(()=>(null!=t&&(async()=>{let e=y.f.isHorizontalMode()?h*c:1e5;await j(t,x,e),a({ip:((e,t)=>{let n=e.GraphicSheet.MeasureList,r=n.map(e=>{var t;return null==(t=e[0])?void 0:t.stave.x}),i=Object.entries(t).map(e=>[parseFloat(e[0]),e[1]]);if(i.sort((e,t)=>e[0]-t[0]),i=[[0,0]].concat(i),!y.f.isHorizontalMode()){let e=n.map(e=>{var t;return null==(t=e[0])?void 0:t.stave.y}),t=e[0];e=e.map(e=>e-t);let i=0,s=[[0,0]],l=[];e.forEach((e,t)=>{if(isNaN(e))return void console.log("Found Nan :(");if(e!=i){let e=s[s.length-1],n=w(e[1],i,t-e[0]);l=l.concat(n),s.push([t,i])}i=e});let o=s[s.length-1],a=e.length-1;if(o[0]!=a){s.push([a,i]);let e=w(o[1],i,a-o[0]);(l=l.concat(e)).push(i)}else l.push(o[1]);r=l}let s=i.length,[l,o]=i[0],a=[],d=[];for(let e=0;e<s-1;++e){let[t,n]=i[e+1];if(void 0!==r[n-1]){for(let e=o;e<n;++e){let i=r[e-1];if(void 0!==i){let r=l+(t-l)*(e-o)/(n-o);a.push(r),d.push(i)}}l=t,o=n}}a.push(l),d.push(r[o-1]),[1,2].forEach(e=>{a.push(l+5*e),d.push(r[o-1])});let c=.3*!!y.f.isHorizontalMode(),h=new g(a,d);return(e,t)=>Math.max(0,(e<=a[0]?d[0]:e>=a[a.length-1]?d[d.length-1]:h.interpolate(e))*t-c*window.innerWidth)})(t,I)})})(),()=>{a(null)}),[t,I,h,c,u,x]),(0,s.useEffect)(()=>{if(null!==o){let e=o.ip,t=setInterval(async()=>{let t=e(await b(),u);l(y.f.isHorizontalMode()?{x:t,y:0}:{x:0,y:t})},20);return()=>{clearInterval(t)}}},[b,o,u]);let k=y.f.isHorizontalMode()?h*c:800;return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)("div",{id:f,style:{height:"".concat(k+i.y,"px"),width:"".concat(x,"px"),marginLeft:"-".concat(i.x,"px"),marginTop:"-".concat(i.y,"px")}})})};var I=n(8886);let C=[1,0,-1],k=async e=>(await fetch(e)).text(),M=(e,t,n,r)=>{let i=(0,a.qU)(e,t);i.childNodes.forEach(e=>{e.nodeName===n&&e.id!==r&&i.removeChild(e)})},E=e=>{let t=e.parts[e.currPartIdx].id,n=(e=>{let t=e.cloneNode(!0);return t.xmlStandalone=e.xmlStandalone,t})(e.origXml);M(n,"part-list","score-part",t),M(n,"score-partwise","part",t);let r=y.f.getFingering();return(0,a.mg)(n,e.pitch,e.octave,r),n},N=e=>{let{scoreInfo:t,player:n}=e,i="/mxl/".concat(t.fileName,".musicxml"),l="https://musescore.com/user/83726533/scores/".concat(t.source),d=(0,I.N)(),{t:x}=(0,h.A)(),[p,g]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{let e=await k(i),t=(0,a.NO)(e),n={xml:t,parts:(e=>{let t=(0,a.qU)(e,"score-partwise"),n=[];for(let e of t.getElementsByTagName("score-part"))n.push({id:e.id,name:e.getElementsByTagName("part-name")[0].textContent});return n})(t),currPartIdx:0,origXml:t,pitch:y.f.getInstrumentKey(),octave:0};g({...n,xml:E(n)})})()},[i]),null!==p){let e=p.pitch,s=p.currPartIdx,h=p.octave,m=(t,n,r)=>{if(t===s&&n===e&&r===h)return;let i={...p,currPartIdx:t,pitch:n,octave:r},l=E(i);g({...i,xml:l,currPartIdx:t})},y=e=>e>0?"+".concat(e):"".concat(e),f=x("octave"),v=0===h?f:"".concat(f,": ").concat(y(h)),j=C.map(t=>({name:y(t),onClick:()=>m(s,e,t),key:y(t)})),w=(0,r.jsx)(u.D4,{options:j,children:v}),I=a.S4.map((e,t)=>({name:e,onClick:()=>m(s,e,h),key:e})),k=x("instrumentKeyShort"),M=(0,r.jsx)(u.D4,{options:I,children:"".concat(k,": ").concat(e)}),N=d.options[0],S={...N,onClick:()=>N.onClick(t.videoId),key:"addFav"},A={...o.zA,style:{...o.zA.style,minWidth:"30px"}},F=(0,r.jsx)(u.D4,{options:[S],wrapper:(e,t)=>(0,r.jsxs)("button",{onClick:t,...A,children:[(0,r.jsx)(c.a95,{})," "]}),alignRight:!0,children:"..."}),T=(0,r.jsxs)("div",{style:{...o.eL,flexWrap:"wrap"},children:[F,M,w]}),P=(0,r.jsx)(b,{xml:p.xml,measureMap:t.measureMap,getTime:n.getTime},i),z=(0,r.jsx)("div",{style:{width:a.$n.width,maxWidth:a.$n.maxWidth,margin:"auto"},children:(0,r.jsxs)("div",{style:{...o.yG,...o.Xe},children:[(0,r.jsxs)("h4",{children:[x("viewSheetsOn"),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:l,target:"_blank",children:"MuseScore.com"})]}),T]})}),L=(0,r.jsx)("div",{style:{width:a.$n.width,maxWidth:a.$n.maxWidth,margin:"auto"},children:(0,r.jsxs)("div",{style:{...o.yG,...o.Xe},children:[(0,r.jsx)("h3",{children:t.name}),(0,r.jsx)("h3",{children:"-"}),(0,r.jsx)("h3",{children:t.artist})]})});return(0,r.jsxs)(r.Fragment,{children:[L,n.comp,z,P,d.overlay]})}return(0,r.jsx)(m.Loading,{addComp:!0})};var S=n(9252);let A=e=>{let t=a.wA.filter(t=>t.videoId===e.scoreId);if(0===t.length)return(0,r.jsxs)("h3",{children:["YouTube score with ID ",(0,r.jsx)("b",{children:e.scoreId})," not found :("]});let n=t[0];return(0,r.jsx)(F,{scoreInfo:n})},F=e=>{let{scoreInfo:t}=e,n=(e=>{let t=(0,s.useRef)(null),n=(0,s.useCallback)(async()=>{var e;return await (null==(e=t.current)?void 0:e.getInternalPlayer().getCurrentTime())},[t]);return{comp:(0,r.jsx)(d,{playerRef:t,videoId:e}),getTime:n}})(t.videoId);return(0,r.jsx)(N,{scoreInfo:t,player:n})},T=()=>{let e=(0,i.useSearchParams)().get("scoreId");return void 0===e||"string"!=typeof e?(0,r.jsx)(S.To404,{}):(0,r.jsx)(A,{scoreId:e})}},3841:(e,t,n)=>{Promise.resolve().then(n.bind(n,5334)),Promise.resolve().then(n.bind(n,1203))},5334:(e,t,n)=>{"use strict";n.d(t,{Loading:()=>l});var r=n(5155),i=n(4304),s=n(8242);let l=e=>{let{title:t,addComp:n}=e,{t:l}=(0,i.A)(),o=void 0!=t?(0,r.jsx)("h4",{children:t}):null,a=(0,r.jsxs)(r.Fragment,{children:[o,(0,r.jsx)("p",{children:l("loading")})]});return n?(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{style:s.yG,children:a})}):a}},8886:(e,t,n)=>{"use strict";n.d(t,{f:()=>m,N:()=>u});var r=n(5155),i=n(7830),s=n(4304),l=n(2978),o=n(653),a=n(2115),d=n(8242),c=n(883),h=n(749);let u=()=>{let{t:e}=(0,s.A)(),t=(e=>{let[t,n]=(0,a.useState)(!1),{t:i}=(0,s.A)();return{open:()=>n(!0),component:(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,r.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",textAlign:"center",maxWidth:"300px"},children:[(0,r.jsx)("p",{style:{margin:"0 0 20px"},children:e}),(0,r.jsx)("button",{onClick:()=>{n(!1)},...d.zA,children:i("close")})]})})})}})(e("notLoggedIn"));return{options:[{name:e("favoritesAdd"),onClick:e=>{l.Ay.userLoggedIn()||t.open(),l.Ay.addFavorite(e)}}],overlay:t.component}},m=e=>{let{scores:t,sortInfo:n,options:l}=e,{t:a,getLink:d}=(0,s.A)(),u=l||[],m=u.map(e=>({key:e.name,...e})),p=(0,o.KS)((0,r.jsx)(i.a95,{}),m,(e,t)=>(0,r.jsx)("div",{onClick:t,style:{display:"flex",height:h.an,alignContent:"center",alignItems:"center",justifyContent:"center"},children:e}),{width:"100%"},!0),g=u.length>0,y=g?"38%":"40%",f=c.Ul.map(e=>{let t="";return void 0!==n&&n.by===e&&(t=n.ascending?"▴":"▾"),(0,r.jsxs)("th",{onClick:()=>null==n?void 0:n.sortClick(e),style:{cursor:"pointer",width:y,...h.qb},children:[a(e),t]},e)}),v=g?(0,r.jsx)("th",{style:{width:"4%",...h.qb}}):void 0,j=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("th",{style:{width:"10%",...h.qb}}),f,(0,r.jsx)("th",{style:{width:"10%",...h.qb},children:a("songKey")}),v]}),w=(0,r.jsx)(r.Fragment,{children:t.map(e=>{let t=g?(0,r.jsx)("td",{style:h.Qm,children:p(e.videoId)}):void 0,n=d("/piece?scoreId=".concat(e.videoId));return(0,r.jsxs)("tr",{style:{cursor:"pointer",height:h.an},className:"hoverlink",children:[(0,r.jsx)("td",{style:h.T3,children:(0,h._G)((0,r.jsx)("img",{height:h.an,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg"),alt:"YouTube thumbnail of ".concat(e.name," by ").concat(e.artist)}),n)}),c.Ul.map(t=>{var i;return(0,r.jsx)("td",{style:h.Qm,children:(0,h._G)(null==(i=e[t])?void 0:i.trim(),n)},"td-".concat(t))}),(0,r.jsx)("td",{style:h.Qm,children:(0,h._G)(x(e.keys),n)}),t]},e.videoId)})});return(0,r.jsx)(h.tB,{header:j,body:w})},x=e=>e.map(c.Gn).join(", ")},9252:(e,t,n)=>{"use strict";n.d(t,{To404:()=>o});var r=n(5155),i=n(63),s=n(2115),l=n(4304);let o=()=>{let{getLink:e}=(0,l.A)(),t=(0,i.useRouter)();return(0,s.useEffect)(()=>{t.push(e("/404"))}),(0,r.jsx)(r.Fragment,{})}}},e=>{e.O(0,[992,811,479,849,366,558,619,158,192,935,441,255,358],()=>e(e.s=3841)),_N_E=e.O()}]);