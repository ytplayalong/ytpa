(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{1203:(e,t,n)=>{"use strict";n.d(t,{QueryScore:()=>F});var r=n(5155),i=n(63),s=n(2115),l=n(2271),o=n(8242),a=n(883);let d=e=>{let{videoId:t,playerRef:n}=e,i={...a.$n,playerVars:{autoplay:1}},d=s.createElement(l.A,{videoId:t,opts:i,ref:n,onReady:()=>console.log("I'm ready, loaded ".concat(t,"!"))});return(0,r.jsx)("div",{style:{...a.$n,margin:"auto"},children:(0,r.jsx)("div",{style:o.yG,children:d})})};var c=n(7830),h=n(4304),u=n(653),m=n(5334),x=n(1850);function p(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}class g{interpolate(e){let t,n,r,i,s,l;for(n=l=this.x.length-2;(l<=0?n<=0:n>=0)&&!(this.x[n]<=e);l<=0?n+=1:n-=1);return t=this.x[n+1]-this.x[n],i=Math.pow(r=(e-this.x[n])/t,2),(2*(s=Math.pow(r,3))-3*i+1)*this.y[n]+(s-2*i+r)*t*this.m[n]+(-2*s+3*i)*this.y[n+1]+(s-i)*t*this.m[n+1]}constructor(e,t){let n,r,i,s,l,o,a,d,c,h,u,m,x,p,g,y,f;for(l=0,a=e.length,i=[],o=[],n=[],r=[],s=[],d=[],p=a-1;0<=p?l<p:l>p;0<=p?l+=1:l-=1)i[l]=(t[l+1]-t[l])/(e[l+1]-e[l]),l>0&&(o[l]=(i[l-1]+i[l])/2);for(l=0,o[0]=i[0],o[a-1]=i[a-2],c=[],g=a-1;0<=g?l<g:l>g;0<=g?l+=1:l-=1)0===i[l]&&c.push(l);for(h=0,m=c.length;h<m;h++)o[l=c[h]]=o[l+1]=0;for(l=0,y=a-1;0<=y?l<y:l>y;0<=y?l+=1:l-=1)n[l]=o[l]/i[l],r[l]=o[l+1]/i[l],s[l]=Math.pow(n[l],2)+Math.pow(r[l],2),d[l]=3/Math.sqrt(s[l]);for(l=0,c=[],f=a-1;0<=f?l<f:l>f;0<=f?l+=1:l-=1)s[l]>9&&c.push(l);for(u=0,x=c.length;u<x;u++)o[l=c[u]]=d[l]*n[l]*i[l],o[l+1]=d[l]*r[l]*i[l];this.x=e.slice(0,a),this.y=t.slice(0,a),this.m=o}}var y=n(1477);let f="osmd";class v extends x.OpenSheetMusicDisplay{setup(){this.rules.FingeringPosition=1,this.rules.FingeringOffsetY=1,this.rules.FingeringPositionFromXML=!1}}let j=async(e,t,n,r)=>(e.setCustomPageFormat(t,n),e.Zoom=r,e.IsReadyToRender()||console.warn("Should not render"),e.render(),e),w=(e,t,n)=>[...Array(n)].map((r,i)=>e+(t-e)*i/n),I=e=>{let[t,n]=(0,s.useState)(null),[i,l]=(0,s.useState)({x:0,y:0}),[o,a]=(0,s.useState)(null),{height:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,[t,n]=(0,s.useState)(p());return(0,s.useEffect)(()=>{let t,r=()=>{void 0!==t&&clearTimeout(t),t=setTimeout(()=>{n(p())},e)};return window.addEventListener("resize",r),()=>{void 0!==t&&clearTimeout(t),window.removeEventListener("resize",r)}},[]),t}(),c=y.f.getZoom(),h=Math.max(150,.2*d),u=Math.max(Math.min(1,h/260),.5)*c,m=h*u,x=y.f.isHorizontalMode()?4e4*m:window.innerWidth,{getTime:I,measureMap:b,xml:C}=e;(0,s.useEffect)(()=>{(async()=>{let e=new v(f,{drawCredits:!1,drawPartNames:!1,measureNumberInterval:4});e.setup(),await e.load(C),n(e)})()},[C]),(0,s.useEffect)(()=>(null!=t&&(async()=>{let e=y.f.isHorizontalMode()?h*c:1e5;await j(t,x,e,u),a({ip:((e,t)=>{let n=e.GraphicSheet.MeasureList,r=n.map(e=>{var t;return null==(t=e[0])?void 0:t.stave.x}),i=Object.entries(t).map(e=>[parseFloat(e[0]),e[1]]);if(i.sort((e,t)=>e[0]-t[0]),i=[[0,0]].concat(i),!y.f.isHorizontalMode()){let e=n.map(e=>{var t;return null==(t=e[0])?void 0:t.stave.y}),t=e[0];e=e.map(e=>e-t);let i=0,s=[[0,0]],l=[];e.forEach((e,t)=>{if(isNaN(e))return void console.log("Found Nan :(");if(e!=i){let e=s[s.length-1],n=w(e[1],i,t-e[0]);l=l.concat(n),s.push([t,i])}i=e});let o=s[s.length-1],a=e.length-1;if(o[0]!=a){s.push([a,i]);let e=w(o[1],i,a-o[0]);(l=l.concat(e)).push(i)}else l.push(o[1]);r=l}let s=i.length,[l,o]=i[0],a=[],d=[];for(let e=0;e<s-1;++e){let[t,n]=i[e+1];if(void 0!==r[n-1]){for(let e=o;e<n;++e){let i=r[e-1];if(void 0!==i){let r=l+(t-l)*(e-o)/(n-o);a.push(r),d.push(i)}}l=t,o=n}}a.push(l),d.push(r[o-1]),[1,2].forEach(e=>{a.push(l+5*e),d.push(r[o-1])});let c=.3*!!y.f.isHorizontalMode(),h=new g(a,d);return(e,t)=>Math.max(0,(e<=a[0]?d[0]:e>=a[a.length-1]?d[d.length-1]:h.interpolate(e))*t-c*window.innerWidth)})(t,b)})})(),()=>{a(null)}),[t,b,h,c,u,x]),(0,s.useEffect)(()=>{if(null!==o){let e=o.ip,t=setInterval(async()=>{let t=e(await I(),u);l(y.f.isHorizontalMode()?{x:t,y:0}:{x:0,y:t})},20);return()=>{clearInterval(t)}}},[I,o,u]);let k=y.f.isHorizontalMode()?h*c:800;return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)("div",{id:f,style:{height:"".concat(k+i.y,"px"),width:"".concat(x,"px"),marginLeft:"-".concat(i.x,"px"),marginTop:"-".concat(i.y,"px")}})})};var b=n(8886);let C=[1,0,-1],k=async e=>(await fetch(e)).text(),M=(e,t,n,r)=>{let i=(0,a.qU)(e,t);i.childNodes.forEach(e=>{e.nodeName===n&&e.id!==r&&i.removeChild(e)})},E=e=>{let t=e.parts[e.currPartIdx].id,n=(e=>{let t=e.cloneNode(!0);return t.xmlStandalone=e.xmlStandalone,t})(e.origXml);M(n,"part-list","score-part",t),M(n,"score-partwise","part",t);let r=y.f.getFingering();return(0,a.mg)(n,e.pitch,e.octave,r),n},N=e=>{let{scoreInfo:t,player:n}=e,i="/mxl/".concat(t.fileName,".musicxml"),l="https://musescore.com/user/83726533/scores/".concat(t.source),d=(0,b.N)(),{t:x}=(0,h.A)(),[p,g]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{let e=await k(i),t=(0,a.NO)(e),n={xml:t,parts:(e=>{let t=(0,a.qU)(e,"score-partwise"),n=[];for(let e of t.getElementsByTagName("score-part"))n.push({id:e.id,name:e.getElementsByTagName("part-name")[0].textContent});return n})(t),currPartIdx:0,origXml:t,pitch:y.f.getInstrumentKey(),octave:0};g({...n,xml:E(n)})})()},[i]),null!==p){let e=p.pitch,s=p.currPartIdx,h=p.octave,m=(t,n,r)=>{if(t===s&&n===e&&r===h)return;let i={...p,currPartIdx:t,pitch:n,octave:r},l=E(i);g({...i,xml:l,currPartIdx:t})},y=e=>e>0?"+".concat(e):"".concat(e),f=x("octave"),v=0===h?f:"".concat(f,": ").concat(y(h)),j=C.map(t=>({name:y(t),onClick:()=>m(s,e,t),key:y(t)})),w=(0,r.jsx)(u.D4,{options:j,children:v}),b=a.S4.map((e,t)=>({name:e,onClick:()=>m(s,e,h),key:e})),k=x("instrumentKeyShort"),M=(0,r.jsx)(u.D4,{options:b,children:"".concat(k,": ").concat(e)}),N=d.options[0],S={...N,onClick:()=>N.onClick(t.videoId),key:"addFav"},A={...o.zA,style:{...o.zA.style,minWidth:"30px"}},T=(0,r.jsx)(u.D4,{options:[S],wrapper:(e,t)=>(0,r.jsxs)("button",{onClick:t,...A,children:[(0,r.jsx)(c.a95,{})," "]}),children:"..."}),F=(0,r.jsxs)("div",{style:o.eL,children:[T,M,w]}),P=(0,r.jsx)(I,{xml:p.xml,measureMap:t.measureMap,getTime:n.getTime},i),z=(0,r.jsx)("div",{style:{width:a.$n.width,maxWidth:a.$n.maxWidth,margin:"auto"},children:(0,r.jsxs)("div",{style:{...o.yG,...o.Xe},children:[(0,r.jsxs)("h4",{children:[x("viewSheetsOn"),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:l,target:"_blank",children:"MuseScore.com"})]}),F]})}),L=(0,r.jsx)("div",{style:{width:a.$n.width,maxWidth:a.$n.maxWidth,margin:"auto"},children:(0,r.jsxs)("div",{style:{...o.yG,...o.Xe},children:[(0,r.jsx)("h3",{children:t.name}),(0,r.jsx)("h3",{children:"-"}),(0,r.jsx)("h3",{children:t.artist})]})});return(0,r.jsxs)(r.Fragment,{children:[L,n.comp,z,P,d.overlay]})}return(0,r.jsx)(m.Loading,{addComp:!0})};var S=n(9252);let A=e=>{let t=a.wA.filter(t=>t.videoId===e.scoreId);if(0===t.length)return(0,r.jsxs)("h3",{children:["YouTube score with ID ",(0,r.jsx)("b",{children:e.scoreId})," not found :("]});let n=t[0];return(0,r.jsx)(T,{scoreInfo:n})},T=e=>{let{scoreInfo:t}=e,n=(e=>{let t=(0,s.useRef)(null),n=(0,s.useCallback)(async()=>{var e;return await (null==(e=t.current)?void 0:e.getInternalPlayer().getCurrentTime())},[t]);return{comp:(0,r.jsx)(d,{playerRef:t,videoId:e}),getTime:n}})(t.videoId);return(0,r.jsx)(N,{scoreInfo:t,player:n})},F=()=>{let e=(0,i.useSearchParams)().get("scoreId");return void 0===e||"string"!=typeof e?(0,r.jsx)(S.To404,{}):(0,r.jsx)(A,{scoreId:e})}},3841:(e,t,n)=>{Promise.resolve().then(n.bind(n,5334)),Promise.resolve().then(n.bind(n,1203))},5334:(e,t,n)=>{"use strict";n.d(t,{Loading:()=>l});var r=n(5155),i=n(4304),s=n(8242);let l=e=>{let{title:t,addComp:n}=e,{t:l}=(0,i.A)(),o=null!=t?t:(0,r.jsx)("h4",{children:t}),a=(0,r.jsxs)(r.Fragment,{children:[o,(0,r.jsx)("p",{children:l("loading")})]});return n?(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{style:s.yG,children:a})}):a}},8886:(e,t,n)=>{"use strict";n.d(t,{f:()=>v,N:()=>f});var r=n(5155),i=n(2619),s=n.n(i),l=n(7830),o=n(4304),a=n(2978),d=n(653),c=n(2115),h=n(8242),u=n(883);let m="80px",x={font:"inherit",color:"inherit",textDecoration:"none",height:m,display:"block",padding:0,margin:0},p={paddingTop:0,paddingBottom:0,paddingRight:0},g={...p,paddingLeft:".4em"},y=(e,t)=>(0,r.jsx)(s(),{style:x,href:t,children:(0,r.jsx)("div",{style:{height:m,alignContent:"center"},children:e})}),f=()=>{let{t:e}=(0,o.A)(),t=(e=>{let[t,n]=(0,c.useState)(!1),{t:i}=(0,o.A)();return{open:()=>n(!0),component:(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,r.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"10px",textAlign:"center",maxWidth:"300px"},children:[(0,r.jsx)("p",{style:{margin:"0 0 20px"},children:e}),(0,r.jsx)("button",{onClick:()=>{n(!1)},...h.zA,children:i("close")})]})})})}})(e("notLoggedIn"));return{options:[{name:e("favoritesAdd"),onClick:e=>{a.Ay.userLoggedIn()||t.open(),a.Ay.addFavorite(e)}}],overlay:t.component}},v=e=>{let{scores:t,sortInfo:n,options:i}=e,{t:s,getLink:a}=(0,o.A)(),c=i||[],h=c.map(e=>({key:e.name,...e})),x=(0,d.KS)((0,r.jsx)(l.a95,{}),h,(e,t)=>(0,r.jsx)("div",{onClick:t,style:{display:"flex",height:m,alignContent:"center",alignItems:"center",justifyContent:"center"},children:e}),{width:"100%"}),f={textAlign:"left",...g},v=c.length>0,w=v?"38%":"40%",I=u.Ul.map(e=>{let t="";return void 0!==n&&n.by===e&&(t=n.ascending?"▴":"▾"),(0,r.jsxs)("th",{onClick:()=>null==n?void 0:n.sortClick(e),style:{cursor:"pointer",width:w,...f},children:[s(e),t]},e)}),b=v?(0,r.jsx)("th",{style:{width:"4%",...f}}):void 0,C=(0,r.jsx)("thead",{style:{width:"100%"},children:(0,r.jsxs)("tr",{style:{width:"100%"},children:[(0,r.jsx)("th",{style:{width:"10%",...f}}),I,(0,r.jsx)("th",{style:{width:"10%",...f},children:s("songKey")}),b]})});return(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 ".concat("6px")},children:[C,(0,r.jsx)("tbody",{children:t.map(e=>{let t=v?(0,r.jsx)("td",{style:g,children:x(e.videoId)}):void 0,n=a("/piece?scoreId=".concat(e.videoId));return(0,r.jsxs)("tr",{style:{cursor:"pointer",height:m},className:"hoverlink",children:[(0,r.jsx)("td",{style:p,children:y((0,r.jsx)("img",{height:m,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg"),alt:"YouTube thumbnail of ".concat(e.name," by ").concat(e.artist)}),n)}),u.Ul.map(t=>{var i;return(0,r.jsx)("td",{style:g,children:y(null==(i=e[t])?void 0:i.trim(),n)},"td-".concat(t))}),(0,r.jsx)("td",{style:g,children:y(j(e.keys),n)}),t]},e.videoId)})})]})},j=e=>e.map(u.Gn).join(", ")},9252:(e,t,n)=>{"use strict";n.d(t,{To404:()=>o});var r=n(5155),i=n(63),s=n(2115),l=n(4304);let o=()=>{let{getLink:e}=(0,l.A)(),t=(0,i.useRouter)();return(0,s.useEffect)(()=>{t.push(e("/404"))}),(0,r.jsx)(r.Fragment,{})}}},e=>{e.O(0,[992,811,479,849,366,980,158,770,441,255,358],()=>e(e.s=3841)),_N_E=e.O()}]);